<link rel="import"
  href="../elements.shared.html">
<link rel="import"
  href="../../bower_components/core-ajax/core-ajax.html">
<link rel="import"
  href="../../bower_components/core-list/core-list.html">
<link rel="import"
  href="../../bower_components/core-image/core-image.html">

<!--
  TODO:
  - Alphabetical grouping
-->

<polymer-element name="contacts-list" fit layout vertical>
  <template>
    <link rel="stylesheet" href="contacts-list.css">
    <core-ajax url="https://polymer-contacts.firebaseio.com/contacts.json"
               response="{{data}}"
               on-core-response="{{onAjaxResponse}}"
               auto>
    </core-ajax>
    <core-list id="list" data="{{data}}" flex>
      <template>
        <a href="/#/contacts/{{index}}">
          <div class="row" layout horizontal center>
            <core-image src="{{model.avatar}}" preload sizing="cover">
            </core-image>
            <div flex>{{model.name}}</div>
          </div>
        </a>
      </template>
    </core-list>
  </template>
  <script>
  (function() {

    Polymer({
      onAjaxResponse: function() {
        this.fire('contacts-list-ready');
      }
    });

  })();
  </script>
</polymer-element>
